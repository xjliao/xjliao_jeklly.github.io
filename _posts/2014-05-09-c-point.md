---
layout: post
title: "C 指针"
categories:
- C
tags:
- C


---
##一、C指针概念
摘自：网易广州社区C语言版的精华区，对文章的有些地方做了调整。作者girlrong(阿蓉)，估计是个妹纸。可惜没找到原帖  

如果不懂这个东西，别说会C。
>指针是一个特殊的变量，它连绵存储的是指被解释味内存里的一个地址。
  
要搞清一个指针需要搞清指针的四方面内容：
>
1.指针的类型  
2.指针所执行的类型  
3.指针的值或者叫指针所指向的内存区  
4.指针本身所占据的内存区
  
Demo 1
{% highlight c linenos %}
int *ptr;
char *ptr;
int **ptr;
int (*ptr)[3];
int *(*ptr)[4];

{% endhighlight %}

####1、指针的类型
从语法的角度看，只要把指针与距离的指针名字去掉，剩下的部分就是指针的类型。这是指针本身所具有的类型。

{% highlight c linenos %}
int *ptr;//指针的类型是 int *
char *ptr;//指针的类型是 char *
int **ptr;//指针的类型是 int **
int (*ptr)[3];//指针的类型是 int (*)[3]
int *(*ptr)[4];//指针的类型是 int *(*)[4]
{% endhighlight %}
判断指针的类型很简单吧！

####2、指针所指向的类型
当你通过指针来访问指针所指向的内存区时，指针所指向的类型决定了编译器把那片内存区的内容当作什么来看待。从语法上看，你只需把指针声明语句中的名字和左边的指针声明符*去掉，剩下的就是指针所指向的类型。

{% highlight c linenos %}
int *ptr;//指针所指向的类型是 int
char *ptr;//指针所指向的类型是 char
int **ptr;//指针所指向的类型是 int *
int (*ptr)[3];//指针所指向的类型是 int()[3]
int *(*ptr)[4];//指针所指向的类型是 int *()[4]

{% endhighlight %}

在指针的算术运算符中，指针所指向的类型有很大的作用。  

指针的类型（即指针本身的类型）和指针所指向的类型是两个概念。当对C越来越熟悉时，会发现，把与指针搅合在一起的“类型”这个概念分成“指针的类型”和“指针所指向的类型”两个概念，即精通指针的关键点之一。  

3、指针的值，或者叫指针的多指向的内存区活地址，指针的值时指指针本身存储的数字，这个指被编译器当作一个地址，而不是一个一般的数值。在32位程序里，所有类型的指针的值都是一个32位整数，因为32位程序里内存地址全都是32位长。

指针所指向的内存区就是从指针的值所代表的那个内存地址开始，长度为sizeof(指针所指向都类型))的一片内存区。以后，我们说一个指针的值时XX，就相当于说该指针指向了以XX为首地址的一片内存区域，我们说一个指针指向了某块内存区域，就相当于说该指针的值是这块内存区域的首地址。 

指针所指向的内存区和指针所指向的类型是两个完全不同的概念。在Demo 1中，指针所指向的类型已经又了，但由于还未初始化，所以所指向的内存区是不存在的，或者说是无意义的。

以后，没遇到一个指针，都应该问问：这个指针的类型是什么？指针指向的类型是什么？该指针指向了哪里？

4、指针本身所占的内存区  
指针本身占了多大的内存？你只要用函数sizeof(指针的类型)测以下就知道了。在32位平台李，指针本身占据4个字节的长度，指针本身占据的内存这个概念在判断一个指针表达式是否存在左值是时很有用。

##二、指针的算术运算




